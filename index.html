<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Coletores Solares</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container">
            <h1>Calculadora de Coletores Solares</h1>
            <nav>
                <a href="index.html">Sistema</a>
                <a href="contato.html">Contato</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <h2>Calcule o número de coletores solares necessários</h2>
            <p class="info">Todos os cálculos são estimados. Consulte sempre o manual da empresa antes de realizar a compra.</p>
            <form id="calculadoraForm">
                <label for="empresa">Escolha a empresa:</label>
                <select id="empresa" name="empresa">
                    <option value="KOMECO">KOMECO</option>
                    <option value="Solis">Solis</option>
                    <option value="Mastersol">Mastersol</option>
                    <option value="Girassol">Girassol</option>
                    <option value="Soria">Soria</option>
                    <option value="Tempersol">Tempersol</option>
                    <option value="TS-Solar">TS-Solar</option>
                </select>

                <label for="modelo">Escolha o modelo (se aplicável):</label>
                <select id="modelo" name="modelo">
                    <option value="">-- Selecione --</option>
                </select>

                <label>Método de cálculo:</label>
                <div class="radio-group">
                    <label><input type="radio" name="metodo" value="Litragem" checked> Litragem</label>
                    <label><input type="radio" name="metodo" value="Área"> Área (m²)</label>
                </div>

                <div id="litrosInput">
                    <label for="litros">Litragem da piscina (litros):</label>
                    <input type="number" id="litros" name="litros">
                </div>

                <div id="areaInput" style="display: none;">
                    <label for="comprimento">Comprimento da piscina (m):</label>
                    <input type="number" id="comprimento" name="comprimento">

                    <label for="largura">Largura da piscina (m):</label>
                    <input type="number" id="largura" name="largura">

                    <p id="areaCalculada">Área calculada: </p>
                </div>

                <label>Ajuste de 30% (prainha/cascata/região fria)?</label>
                <div class="radio-group">
                    <label><input type="radio" name="ajuste" value="Sim"> Sim</label>
                    <label><input type="radio" name="ajuste" value="Não" checked> Não</label>
                </div>

                <button type="button" onclick="calcularColetores()">Calcular Coletores</button>
            </form>
        </div>
    </main>

    <footer>
        <div class="container">
            <p class="info">Todos os cálculos são estimados. Consulte sempre o manual da empresa antes de realizar a compra.</p>
        </div>
    </footer>

    <script>
        const empresas = {
            "KOMECO": { "modelos": { "KOCS PS 2.0": 2.4, "KOCS PS 3.0": 3.6, "KOCS PS 4.0": 4.8 } },
            "Solis": { "capacidade_por_coletor": 4000 },
            "Mastersol": { "modelos": { "Mastersol 2000": 1.2, "Mastersol 3000": 1.5, "Mastersol 3700": 1.8, "Mastersol 4500": 2.0, "Mastersol 5000": 2.5 } },
            "Girassol": { "capacidade_por_coletor": 4000 },
            "Soria": { "modelos": { "Urja 200": 0.64, "Urja 300": 0.96, "Urja 400": 1.18, "Urja 500": 1.44, "Urja 5000": 6.0 } },
            "Tempersol": { "modelos": { "Pool 200": 1.0, "Pool 300": 1.5, "Pool 400": 2.0 } },
            "TS-Solar": { "modelos": { "2m x 0,30m": 0.6, "3m x 0,30m": 0.9, "3,70m x 0,30m": 1.11, "4m x 0,30m": 1.2, "5m x 0,30m": 1.5 } }
        };

        document.getElementById('empresa').addEventListener('change', function () {
            const empresa = this.value;
            const modeloSelect = document.getElementById('modelo');
            modeloSelect.innerHTML = '<option value="">-- Selecione --</option>';

            if (empresas[empresa] && empresas[empresa].modelos) {
                Object.keys(empresas[empresa].modelos).forEach(modelo => {
                    modeloSelect.innerHTML += `<option value="${modelo}">${modelo}</option>`;
                });
            }
        });

        document.querySelectorAll('input[name="metodo"]').forEach(radio => {
            radio.addEventListener('change', function () {
                if (this.value === "Litragem") {
                    document.getElementById('litrosInput').style.display = 'block';
                    document.getElementById('areaInput').style.display = 'none';
                } else {
                    document.getElementById('litrosInput').style.display = 'none';
                    document.getElementById('areaInput').style.display = 'block';
                }
            });
        });

        function calcularColetores() {
            const empresa = document.getElementById('empresa').value;
            const metodo = document.querySelector('input[name="metodo"]:checked').value;
            const ajuste = document.querySelector('input[name="ajuste"]:checked').value;

            let numColetores;

            if (metodo === "Litragem") {
                const litros = parseFloat(document.getElementById('litros').value);
                if (empresas[empresa].capacidade_por_coletor) {
                    numColetores = litros / empresas[empresa].capacidade_por_coletor;
                } else {
                    alert("Esta empresa não suporta cálculo por litragem!");
                    return;
                }
            } else {
                const comprimento = parseFloat(document.getElementById('comprimento').value);
                const largura = parseFloat(document.getElementById('largura').value);
                const area = comprimento * largura;
                document.getElementById('areaCalculada').innerText = `Área calculada: ${area.toFixed(2)} m²`;

                const modelo = document.getElementById('modelo').value;
                if (!empresas[empresa].modelos || !empresas[empresa].modelos[modelo]) {
                    alert("Modelo não encontrado!");
                    return;
                }
                numColetores = area / empresas[empresa].modelos[modelo];
            }

            if (ajuste === "Sim") {
                numColetores *= 1.3;
            }

            numColetores = Math.ceil(numColetores);
            alert(`Número de coletores necessários: ${numColetores}`);
        }
    </script>
</body>
</html>
